<!DOCTYPE html>
<html>
<head>
    <title>CWRV Predictor</title>
    <script>
        async function analyze() {
            document.getElementById("btn").innerText = "Analyzing...";
            let res = await fetch("/analyze");
            let data = await res.json();
            let div = document.getElementById("results");
            div.innerHTML = "";
            for (let pair in data) {
                let r = data[pair];
                if (r.error) {
                    div.innerHTML += `<div><h3>${pair}</h3><p>${r.error}</p></div>`;
                    continue;
                }
                div.innerHTML += `
                <div style="border:1px solid #ccc;padding:10px;margin:5px;display:inline-block;width:200px;">
                    <h3>${pair}</h3>
                    <p>Prediction: <b>${r.prediction}</b></p>
                    <p>Confidence: ${r.confidence}</p>
                    <p>Accuracy: ${r.accuracy}%</p>
                    <p>Reason: ${r.reason}</p>
                    <small>Last Candle: O:${r.last_candle["o"]} C:${r.last_candle["c"]}</small>
                </div>`;
            }
            document.getElementById("btn").innerText = "Analyze";
        }
    </script>
</head>
<body style="font-family:Arial;">
    <h1>CWRV 123 Web App</h1>
    <button id="btn" onclick="analyze()">Analyze</button>
    <div id="results"></div>
</body>
</html>